"use strict";!function(){var t=/^1[34578]\d{9}$/,o=$(".firstForm"),e=$(".firstForm dd input"),l=$(".firstForm .phone label"),n=$(".clause input"),c=$(".clause label"),s=$(".regist-slider"),a=$(".mobilemsg input"),p=!1;e.on("blur",function(){t.test(e.val())?(l.css({display:"none"}),$.get("http://10.31.162.14/Zshoppro/php/register.php","teltest="+e.val(),function(s){"1"!==s?p=!0:l.css({display:"block"}).html("该手机号已经注册")})):(l.css({display:"block"}),l.html("请输入正确的手机号"),e.val(""),e[0].focus())}),s.on("click",function(s){var l;p?(l=e.val(),t.test(l)&&(n.prop("checked")?(a.attr("tel",l),o.css({display:"none"}),r.css({display:"block"}),i.html("短信已发送至"+e.val().replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")+"，请在10分钟内完成验证"),u.html(h),d=setInterval(function(){h--,u.html(h),h<=0&&(u.parent().css({display:"none"}),m.css({display:"block"}),clearInterval(d),h=5)},1e3),c.css({display:"none"}),$.get("http://10.31.162.14/Zshoppro/php/register.php","tel="+l,function(s){}),p=!1):c.css({display:"block"}))):console.log("不可以")});var r=$(".secondForm"),i=$(".mobilemsg span"),d=null,h=60,u=$(".count-down strong"),m=$(".getagain"),b=$(".encode input"),y=$(".encode .error"),v=$(".setpassword input"),g=$(".setpassword .error");console.log(g);var k=$(".repassword input"),f=$(".repassword .error"),w=$(".submitBtn button");var Z=!1;b.on("blur",function(){6===b.val().length?$.post("http://10.31.162.14/Zshoppro/php/register.php",{tel:a.attr("tel"),code:b.val()},function(s){"1"===s?(Z=!0,y.css({display:"none"})):(Z=!1,y.css({display:"block"}).html("请输入正确的验证码"))}):(y.css({display:"block"}).html("请输入正确的验证码"),Z=!1)}),m.on("click",function(){r.css({display:"none"}),o.css({display:"block"}),m.css({display:"none"}),u.parent().css({display:"inline"})});var F=!1;k.on("blur",function(){k.val()===v.val()?(f.css({display:"none"}),F=!0):(F=!1,f.css({display:"block"}).html("两次密码不一致"))});var I=$(".grade"),z=!1,A=/\d+/,B=/[A-Z]+/,W=/[a-z]+/,_=/[\W\_]+/;v.on("input",function(){var s=$(this).val(),l=0;if(g.css({display:"none"}),6<=s.length){switch(A.test(s)&&l++,B.test(s)&&l++,W.test(s)&&l++,_.test(s)&&l++,l){case 1:I.html("弱").css({color:"red"});break;case 2:case 3:I.html("中").css({color:"yellow"});break;case 4:I.html("强").css({color:"green"})}z=2<=l}else I.html(""),z=!1}),v.on("blur",function(){z=$(this).val().length<6?(g.css({display:"block"}).html("密码长度过短"),!1):!(20<$(this).val().length)||(g.css({display:"block"}).html("密码长度过长"),!1)}),w.on("click",function(){return F||f.css({display:"block"}).html("密码错误"),Z||y.css({display:"block"}).html("验证码错误"),z||g.css({display:"block"}).html("密码错误"),console.log(Z,F),Z&&F&&z&&($.post("http://10.31.162.14/Zshoppro/php/register.php",{password:v.val(),tel:a.attr("tel")}),z=Z=F=!1,alert("注册成功"),location.href="login.html"),!1})}();